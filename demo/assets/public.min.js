"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WebAPI(){function e(e,t){try{for(var n=0;n<c.length;n++)c[n](e,t)}catch(e){console.log("_callbackStepStatus error:",e)}}function t(e){l=e}function n(e){p=e}function o(e){u=e}function r(e){c.push(e)}function i(t){e(WebAPI_MSG_START,"post");var n={url:"",body:{},host:"",method:"post",params:{},auth:"",callbackStatusCode:null,middlewareHeader:null};t=$.extend(n,t);var o=t.url,r=t.body,i=t.host,a=t.method,s=t.params,c=t.auth,d=t.callbackStatusCode,f=t.middlewareHeader;""==i&&(i=l),""==c&&(c=u);var g=r,w="";d||(d=function(e){});var h=[];if(s){for(var b in s){var S=_typeof(s[b]);"number"!=S&&"string"!=S||h.push(b+"="+s[b])}w=h.join("&")}var y=o.indexOf("?"),m="&";-1==y&&(m=""!=w?"?":"");var v=i+o+m+w;""==c&&(c=this.globalAuth);var A={"Content-type":"application/x-www-form-urlencoded"};return(""!=c&&"0"!=c||0!=c)&&(A[p]=c),f&&(A=f(A)),jQuery.support.cors=!0,$.ajax({crossDomain:!0,headers:A,type:a,url:v,dataType:"json",data:g,statusCode:{401:function(t){e(WebAPI_MSG_SUCESS,"401"),d(401)},403:function(t){e(WebAPI_MSG_SUCESS,"403"),d(403)},200:function(t){e(WebAPI_MSG_SUCESS,"200")}},error:function(t){e(WebAPI_MSG_ERROR,JSON.stringify(arguments))},success:function(t){e(WebAPI_MSG_SUCESS,JSON.stringify(arguments))}})}function a(e){return e.method="GET",i(e)}function s(e){return e.method="PUT",i(e)}var l="",u="",c=[],p="auth";this.setHost=t,this.setCallbackStepStatus=r,this.setAuth=o,this.setAuthKey=n,this.get=a,this.post=i,this.put=s}function SMPA(){var e=-1;this.DialogLoading=function(){this.DialogLoadingClose(),e=layer.load(1,{shade:[.1,"#fff"]})},this.DialogLoadingClose=function(){-1!=e&&layer.close(e)},this.alert=function(e,t){var n=layer.alert(e,{closeBtn:0},function(){void 0!==t&&t(),layer.close(n)})},this.confirm=function(e,t,n){var o={};void 0!==n&&(o.btn=["是","否"]),void 0!==t&&(t=function(e){});var r=layer.confirm(e,o,function(){t(!0),layer.close(r)},function(){t(!1),layer.close(r)})};this.saveAuth=function(e){$.cookie("StaticMPA_auth12313",e,{expires:1})},this.getAuth=function(){return $.cookie("StaticMPA_auth12313")}}function UserPermissions(){var e="";this.setValue=function(t,n){var o=t;e="";for(var r=0;r<o.length;r++){var i=o[r],a=i.element;""!=e&&(e+=","),e+='[data-permissions="'+a+'"]'}1==!!n&&this.run()},this.run=function(){console.log("run "+e),$(e).show()}}var WebAPI_MSG_START="WebAPI_MSG_START",WebAPI_MSG_ERROR="WebAPI_MSG_ERROR",WebAPI_MSG_SUCESS="WebAPI_MSG_SUCESS";window.WebAPI=new WebAPI,window.WebAPI.WebAPI_MSG_START=WebAPI_MSG_START,window.WebAPI.WebAPI_MSG_ERROR=WebAPI_MSG_ERROR,window.WebAPI.WebAPI_MSG_SUCESS=WebAPI_MSG_SUCESS,window.SMPA=new SMPA,window.console||(window._console=window.console,window.console=function(e){function t(t){return function(){if("object"===_typeof(e)&&"function"==typeof e[t])return e[t].apply(e,Array.prototype.slice.call(arguments))}}return{log:t("log"),debug:t("debug"),info:t("info"),warn:t("warn"),exception:t("exception"),assert:t("assert"),dir:t("dir"),dirxml:t("dirxml"),trace:t("trace"),group:t("group"),groupCollapsed:t("groupCollapsed"),groupEnd:t("groupEnd"),profile:t("profile"),profileEnd:t("profileEnd"),count:t("count"),clear:t("clear"),time:t("time"),timeEnd:t("timeEnd"),timeStamp:t("timeStamp"),table:t("table"),error:t("error"),memory:t("memory"),markTimeline:t("markTimeline"),timeline:t("timeline"),timelineEnd:t("timelineEnd")}}(window._console)),String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")},String.prototype.ltrim=function(){return this.replace(/(^\s*)/g,"")},String.prototype.rtrim=function(){return this.replace(/(\s*$)/g,"")},Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},window.str2asc=function(e){return("0"+e.charCodeAt(0).toString(16)).slice(-2)},window.asc2str=function(e){return String.fromCharCode(e)},window.UrlEncode=function(e,t){if(void 0===t&&(t=!0),""==e)return"";t&&(e=encodeURI(e));for(var n="",o="!\"#$%&'()*+,/:;<=>?[]^`{|}~%",r="",i=0;i<e.length;i++){var a=e.charAt(i),s=str2asc(a);r+=a+":"+s+"n",parseInt("0x"+s)>127?n+="%"+s.slice(0,2)+"%"+s.slice(-2):" "==a?n+="+":-1!=o.indexOf(a)?n+="%"+s.toString(16):n+=a}return n},window.UrlDecode=function(e,t){if("undefined"!=typeof decodeURI)return decodeURI(e);if(void 0===t&&(t=!0),!e)return"";if(""==e)return"";for(var n="",o=0;o<e.length;o++){var r=e.charAt(o);if("+"==r)n+=" ";else if("%"==r){var i=e.substring(o+1,o+3);parseInt("0x"+i)>127?(n+=asc2str(parseInt("0x"+i+e.substring(o+4,o+6))),o+=5):(n+=asc2str(parseInt("0x"+i)),o+=2)}else n+=r}return t&&"undefined"!=typeof decodeURI&&(n=decodeURI(n)),n},window.e_stopPropagation=function(e){var t=!1;try{e&&e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0),t=!0}catch(e){t=!1,console.log("window.e_stopPropagation error",JSON.stringify(e))}return t},window.e_preventDefault=function(e){var t=!1;try{e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1),t=!0}catch(e){t=!1,console.log("window.e_preventDefault error",JSON.stringify(e))}return t},window.BROWSER={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/)||!!e.match(/AppleWebKit/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1||e.indexOf("Mac")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()},window.BROWSER_IE_versions=function(){var e=navigator.userAgent;return e.indexOf("MSIE")>-1?/\d+/.exec(e.split(";")[1]):-1},window.getRequest=function(e){void 0===e&&(e=location.search);var t=e.split("?"),n={};if(t.length>=2){var o=t[1].split("&");if(o.length>0)for(var r=0;r<o.length;r++){var i=o[r].split("=");n[i[0]]=i[1]}}return n},window.toNumber=function(e){return e=Number(e),isNaN(e)?0:e},Number.prototype.toFixed=function(e){return(parseInt(this*Math.pow(10,e)+.5)/Math.pow(10,e)).toString()},window.toFloat=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=3),e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(t)},window.toThousands=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=3),isNaN(e))return"";e=window.toFloat(e||0);var n=(e||0).toString().split(".");return n[0]=n[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,"),n.join(".")},Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,o=function(){},r=function(){return n.apply(this instanceof o&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,r.prototype=new o,r}),window.WebAPI.setHost("http://localhost:3000/"),window.WebAPI.setAuthKey("sessionKey");var login_auth=window.SMPA.getAuth();""!=login_auth&&window.WebAPI.setAuth(login_auth),window.WebAPI.setCallbackStepStatus(function(e,t){e==window.WebAPI.WebAPI_MSG_SUCESS&&"401"==t?window.SMPA.alert("收到401,你没有权限，[重写web/assets/public.js],加入自己的逻辑"):e==window.WebAPI.WebAPI_MSG_SUCESS&&"403"==t&&window.SMPA.alert("收到403,你没有权限，[重写web/assets/public.js],加入自己的逻辑")}),window.WebAPI.permissions=new UserPermissions,window.renderTemplete=function(e,t){try{var n=function e(t){var n,o=[],r=[];for(n in t)o.push(n),r.push(t[n]);return new Function(o,e.$).apply(t,r)};if(!n.$){var o=e.split("[:");n.$="var $=''";for(var r=0;r<o.length;r++){var i=o[r].split(":]");0!=r&&(n.$+="="==i[0].charAt(0)?"+("+i[0].substr(1)+")":";"+i[0].replace(/\r\n/g,"")+"$=$"),n.$+="+'"+i[i.length-1].replace(/\'/g,"\\'").replace(/\r\n/g,"\\n").replace(/\n/g,"\\n").replace(/\r/g,"\\n")+"'"}n.$+=";return $;"}return t?n(t):n}catch(t){console.log("window.renderTempvare error:"+t),console.log("error tpl:",e)}},require.config({baseUrl:"/assets/",paths:{jquery:"lib/general/jquery/jquery-1.9.1.min",bootstrap:"lib/general/bootstrap/js/bootstrap.min",layer:"lib/general/layer/layer",component:"component","component/test":"component/test","component/DebugInfoPad":"component/DebugInfoPad"},map:{"*":{css:"lib/general/css.min"}},shim:{jquery:{exports:"$"},bootstrap:{deps:["jquery","css!lib/general/bootstrap/css/bootstrap.min"]},layer:{deps:["jquery","css!lib/general/layer/theme/default/layer"]}}});